diff --git a/node_modules/@parcel/transformer-js/lib/JSTransformer.js b/node_modules/@parcel/transformer-js/lib/JSTransformer.js
index 4953828..cf9762d 100644
--- a/node_modules/@parcel/transformer-js/lib/JSTransformer.js
+++ b/node_modules/@parcel/transformer-js/lib/JSTransformer.js
@@ -350,7 +350,7 @@ var _default = new (_plugin().Transformer)({
       source_type: asset.env.sourceType === 'script' ? 'Script' : 'Module',
       supports_module_workers: supportsModuleWorkers,
       is_library: asset.env.isLibrary,
-      is_esm_output: asset.env.outputFormat === 'esmodule',
+      is_esm_output: asset.env.outputFormat === 'esmodule' || true,
       trace_bailouts: options.logLevel === 'verbose',
       is_swc_helpers: /@swc[/\\]helpers/.test(asset.filePath)
     });
@@ -757,7 +757,7 @@ var _default = new (_plugin().Transformer)({
       }
     }
     asset.type = 'js';
-    asset.setBuffer(compiledCode);
+    asset.setBuffer(Buffer.from(compiledCode.toString('utf8').replace(/new URL\("(\w{16})", import\.meta\.url\)/g, "\"$1\"")));
     if (map) {
       let sourceMap = new (_sourceMap().default)(options.projectRoot);
       sourceMap.addVLQMap(JSON.parse(map));
